# .chart仕様書
.chartは太鼓さん次郎の譜面(.tja)をベースに開発されたものなので、太鼓さん次郎の譜面の書き方に似ています。

## 譜面情報
ヘッダーには諸々の譜面情報を記述します。\[Key名\]:\[値\]の形式で一行ずつ記述します。
- ID
    - 譜面を識別するために必要なID。任意の一意な文字列。
- TITLE
    - 曲のタイトル
- COMPOSE
    - 作曲者
- ILLUST
    - ジャケット画像の作者
- CHARTEDIT
    - 譜面作成者
- BPM
    - 1分間に何回のビートがあるか？
- SONGVOL
    - 曲の音量
- OFFSET
    - 曲に対して譜面を何秒早く再生し始めるか。基本的に譜面の再生開始は曲の再生開始より遅くなるので負の値を指定することが多いです。
- BEAT
    - 拍子。4拍子とか3拍子とか。
- WAVE
    - 音源ファイル(.mp3)のパス

## 譜面本体
譜面本体はまず"DIFFICULTY:\[難易度(EASY,NORMAL,HARD)\],\[level\]"で難易度とレベル(整数)を宣言し、続く"#START"から"#END"までがその難易度の譜面となります。他の難易度の譜面もそれに続けて同一ファイル内に記述します。  
"#START"以降では1行につき1小節分の譜面情報を示します。
### 規則
- 1行は1小節で、その中にカンマで区切られた音符・休符があり、その数だけ1小節の時間が等分されます。「0」は休符、ノーツのあるところは「\[ノーツの種類\]:\[ノーツのゲート\]」で表現します。
- ノーツの種類は1が通常、3がロングノーツとなっています。(※2は廃止されました)
- ノーツのゲートは下のゲートが左から1～4、上のゲートが左から5～8の数字が割り当てられています。
- ロングノーツの場合は、ノーツの種類を示す「3」に続いて中括弧内に伸ばす拍数(小数可)を記入します。
- 行の終わりにカンマは不要です。
- 全休符の小節は空行ではなく「0」としてください。
- 「//」が含まれている場合、その行全体がスキップされます。
- 「&」で同時刻に叩く複数のノーツを表現できます。  
例:1拍目は2のゲートに4拍のロングノーツ、2拍目は1と4のゲートに通常ノーツ、3拍目と4拍目は休符とするとき(4拍子)  
`3{4}:2,1:1&1:4,0,0`
- レーンの上下が変わる直前の通常ノーツは「上昇ノーツ」「下降ノーツ」として扱われます。上昇・下降の直前にロングノーツを指定した場合は、上昇ノーツ、下降ノーツに変更されるのでご注意ください。

### 譜面中で使える命令文
- #DELAY \[数字\] 
    - 以後の音符が流れるタイミングを指定秒遅らせます
- #BEAT \[数字\]
    - 以後の譜面の拍子を変えます
- #SCROLSPEED \[数字\]
    - 以後のノーツのスクロール速度を変えます。基準値は1です。
- #BPMCHANGE \[数字\] 
    - 以後のBPMを入力した数字に変えます、小数可。


## 譜面サンプル
以下は.chartファイルのサンプルです。
```
ID:example
TITLE:EXAMPLE SONG
COMPOSE:iwashi
ILLUST:iwashi
CHARTEDIT:iwashi
BPM:120
SONGVOL:80
OFFSET:-0.64
BEAT:4
WAVE:Example/example.mp3

DIFFICULTY:EASY,3
#START
1:1
0
1:1
0
1:1
0
1:1
1:1
#END

DIFFICULTY:NORMAL,6
#START
1:1,0,1:3,1:2,0,1:4,1:3,1:2
1:1,1:1,1:1,1:1
0
0
0
0
0
0
#END

DIFFICULTY:HARD,9
#START
1:1,0,1:3,1:2,0,1:4,1:3,1:2
1:3,1:1,1:3,1:8,0,1:5,0,0
1:4,0,1:2,1:3,0,1:1,1:2,1:3
#SCROLLSPEED 0.33
1:1&1:4,1:1&1:4,1:1&1:4,1:1&1:4,0,1:8,0,0
#SCROLLSPEED 1
1:1,0,1:3,1:2,0,1:4,1:3,1:2
1:3,1:1,1:3,1:8,0,1:5,0,0
3{4}:1&1:4,0,1:2,1:3,0,1:2,1:3,1:4
#SCROLLSPEED 2
0,1:1,1:4,1:8,1:5,0,0,0
#END
```
